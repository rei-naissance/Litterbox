<div class="mt-4 bg-white rounded-xl">
  <!-- Profile Section -->
  <div class="flex justify-between">
    <div class="flex items-center p-4">
      <div class="h-9 w-9 bg-gray-font1 rounded-full"></div>
      <div class="ml-3">
        <p class="font-medium">{{ post.author.email }}</p>
        <p class="text-xs text-gray-font"> {{ post.date_posted }}</p>
      </div>
    </div>
    <a href="{% url 'send_report' post.id %}" class="block">
    <div class="p-6">{% include "assets/dots.svg" %}</div>
    </a>
  </div>
  <!-- Main Content Section -->
  <a href="{% url 'post_detail' post.id %}" class="block">
  <div class="px-4 flex border-b stroke-black pb-2">
    <div class="h-56 w-1/2 bg-gray-100 rounded-xl"></div>
    <div class="w-1/2 p-5 items-center">
      <h2 class="text-3xl font-bold">{{ post.title }}</h2>
      <p class="text-gray-700 text-lg mt-2">
        {{ post.content }}
      </p>
    </div>
  </div>
  </a>
  <!-- Interactions Section -->
  <div class="px-4 py-2 flex justify-between text-xs">
    <div class="flex items-center">
      <button class="text-gray-font flex cursor-pointer" onclick="toggleLike('{{ post.id }}')">
        <div class="mx-1" id="like-svg-{{ post.id }}">
          {% if post.id in user_likes %}
            {% include "assets/heart-filled.svg" %}
          {% else %}
            {% include "assets/ph_heart-bold.svg" %}
          {% endif %}
        </div>
        <span id="like-count-{{ post.id }}">{{ post.likes.count }}</span>
      </button>

      <span class="mx-4 text-gray-font flex">
        <div class="mx-1">{% include "assets/iconamoon_comment.svg" %}</div>
        Comment
      </span>
      <span class="text-gray-font flex">
        <div class="mx-1">{% include "assets/uil_share.svg" %}</div>
        Share
      </span>
    </div>
    <div class="flex items-center">
      <span class="text-gray-font">59 min read</span>
      <div class="ml-6">
        {% include "assets/material-symbols_bookmark-outline.svg" %}
      </div>
    </div>
  </div>
</div>

<script>
  function toggleLike(postId) {
    fetch(`/toggle-like/${postId}/`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'X-CSRFToken': '{{ csrf_token }}'
      }
    })
    .then(response => response.json())
    .then(data => {
      const likeCount = document.querySelector(`#like-count-${postId}`);
      const likeSvg = document.querySelector(`#like-svg-${postId}`);
      likeCount.textContent = data.like_count;
      likeSvg.innerHTML = data.liked
      ? `{% include "assets/heart-filled.svg" %}`
      : `{% include "assets/ph_heart-bold.svg" %}`;
    })
    .catch(error => console.error('Error:', error));
  }
</script>